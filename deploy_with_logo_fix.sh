#!/bin/bash
# Script de d√©ploiement avec correction du logo
# Pour corriger le probl√®me du logo manquant sur Render.com

echo "üöÄ D√âPLOIEMENT DOUKA KM avec correction du logo"
echo "==============================================="

echo "üìù √âtapes √† suivre pour corriger le logo sur Render.com:"
echo ""
echo "1. üì§ D√©ployer les modifications:"
echo "   git add ."
echo "   git commit -m \"Fix: Ajouter param√®tres par d√©faut pour logo_url et logo_alt_text\""
echo "   git push origin main"
echo ""
echo "2. ‚è≥ Attendre la fin du d√©ploiement sur Render.com"
echo ""
echo "3. üîß Corriger les param√®tres en base via l'une de ces m√©thodes:"
echo ""
echo "   M√©thode A - Via l'interface web:"
echo "   - Aller sur: https://douka-km.onrender.com/admin/fix-logo-urgent"
echo "   - Cette route ajoutera automatiquement les param√®tres manquants"
echo ""
echo "   M√©thode B - Via debug (pour diagnostic):"
echo "   - Aller sur: https://douka-km.onrender.com/debug/site-settings"
echo "   - V√©rifier l'√©tat des param√®tres"
echo ""
echo "   M√©thode C - Via le shell Render (avanc√©):"
echo "   - python render_fix_logo_urgent.py"
echo ""
echo "4. ‚úÖ V√©rifier que le logo s'affiche correctement sur le site"
echo ""
echo "üìã Fichiers modifi√©s dans cette correction:"
echo "   - app_final_with_db.py: Ajout des param√®tres par d√©faut dans get_all_site_settings()"
echo "   - render_fix_logo_urgent.py: Script de correction pour production"
echo "   - Routes d'urgence: /admin/fix-logo-urgent et /debug/site-settings"
echo ""
echo "üîç Le probl√®me √©tait que:"
echo "   - site_settings.logo_url √©tait undefined/null en production"
echo "   - Les param√®tres par d√©faut n'√©taient pas d√©finis"
echo "   - Le fallback dans le template ne fonctionnait pas correctement"
echo ""
echo "‚ú® Avec cette correction:"
echo "   - get_all_site_settings() retourne toujours /static/img/logo.png par d√©faut"
echo "   - Routes d'urgence permettent la correction imm√©diate en production"
echo "   - Fichiers statiques sont explicitement servis si n√©cessaire"
